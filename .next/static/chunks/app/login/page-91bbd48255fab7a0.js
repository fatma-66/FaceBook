(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{7201:function(e,s,a){Promise.resolve().then(a.bind(a,1193))},1193:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return m}});var r=a(7437),t=a(2265),o=a(1326),n=a(2862),i=a(6548),l=a(6101),d=a(9381),u=a(4245),c=a(1444),p=a(6463),g=a(7138);function m(){localStorage.getItem("userToken");let e=(0,p.useRouter)(),s=u.Ry().shape({email:u.Z_().email("email is invalid").required("Email is required"),password:u.Z_().matches(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,"you must enter a valid password").required("password is required")}),a=(0,c.I0)(),[m,h]=t.useState("female"),{isLoading:y,isError:f,loginmessok:w,loginmessnot:x}=(0,c.v9)(e=>e.users),j=async s=>{let r=await a((0,l.n$)(s));r.payload.error?alert(r.payload.error):e.push("/")};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(d.J9,{initialValues:{email:"",password:""},validationSchema:s,onSubmit:j,children:e=>{let{errors:s,touched:a,handleChange:t,handleBlur:o,values:l,handleSubmit:u}=e;return(0,r.jsxs)(d.l0,{onSubmit:u,style:{width:"50%",margin:"10px auto",display:"flex",flexDirection:"column",padding:"30px",justifyContent:"start"},children:[(0,r.jsx)(d.gN,{as:n.Z,name:"email",label:"Email",variant:"standard",style:{margin:"20px"},error:a.email&&!!s.email,helperText:(0,r.jsx)(d.Bc,{name:"email"})}),(0,r.jsx)(d.gN,{as:n.Z,name:"password",type:"password",label:"Password",variant:"standard",style:{margin:"20px"},error:a.password&&!!s.password,helperText:(0,r.jsx)(d.Bc,{name:"password"})}),(0,r.jsx)(i.Z,{type:"submit",variant:"contained",color:"primary",style:{cursor:"pointer",width:"30%",margin:"20px auto"},children:"Login Now"}),(0,r.jsxs)(g.default,{href:"/register",style:{textDecoration:"none",color:"black",margin:"auto"},children:["Don't have an account yet? ",(0,r.jsx)("span",{style:{color:"black",fontWeight:"bolder"},children:" Register"})]})]})}}),y&&(0,r.jsx)("p",{children:"Loading..."}),f&&(0,r.jsxs)("p",{children:["Error: ",f]})]})})}},6101:function(e,s,a){"use strict";a.d(s,{M_:function(){return o},OA:function(){return l},cA:function(){return d},n$:function(){return n},zv:function(){return i}});var r=a(9753);let t={token:localStorage.getItem("userToken")},o=(0,r.hg)("users/getUserDetails",async e=>{let s=await fetch("https://linked-posts.routemisr.com/users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await s.json()}),n=(0,r.hg)("users/userLogin",async e=>{let s=await fetch("https://linked-posts.routemisr.com/users/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await s.json();return console.log(a),a}),i=(0,r.hg)("users/UploadImage",async e=>{let s=await fetch("https://linked-posts.routemisr.com/users/upload-photo",{method:"PATCH",headers:t,body:e}),a=await s.json();return console.log(a),a}),l=(0,r.hg)("users/getLoggedUserData",async()=>{let e=await fetch("https://linked-posts.routemisr.com/users/profile-data",{headers:t});return await e.json()}),d=(0,r.oM)({name:"users",initialState:{loggedin:!0,message:"",userData:[],loggedmessage:"",registermessok:"",registermessnot:"",loginmessok:"",loginmessnot:""},extraReducers:e=>{e.addCase(o.fulfilled,(e,s)=>{e.registermessok=s.payload.message,e.registermessnot=s.payload.error}),e.addCase(n.fulfilled,(e,s)=>{console.log("Logged"),e.loginmessok=s.payload.message,e.loginmessnot=s.payload.error,s.payload&&s.payload&&s.payload.token&&localStorage.setItem("userToken",s.payload.token)}),e.addCase(n.rejected,(e,s)=>{console.log("Not Logged"),e.loggedmessage=null==s?void 0:s.payload.error}),e.addCase(l.fulfilled,(e,s)=>{e.userData=s.payload.user})},reducers:{}}).reducer}},function(e){e.O(0,[444,753,355,871,349,138,971,23,744],function(){return e(e.s=7201)}),_N_E=e.O()}]);