(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[794],{5964:function(e,t,n){Promise.resolve().then(n.bind(n,481))},729:function(e,t,n){"use strict";n.d(t,{u:function(){return p}});var r=n(2988),o=n(3950),s=n(2265),i=n(2367),a=n(3076),u=n(8017),l=n(1227),c=n(7437);let d=["onChange","maxRows","minRows","style","value"];function f(e){return parseInt(e,10)||0}let m={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},p=s.forwardRef(function(e,t){let{onChange:n,maxRows:p,minRows:h=1,style:g,value:y}=e,v=(0,o.Z)(e,d),{current:w}=s.useRef(null!=y),b=s.useRef(null),x=(0,i.Z)(t,b),j=s.useRef(null),Z=s.useCallback(()=>{let t=b.current,n=(0,a.Z)(t).getComputedStyle(t);if("0px"===n.width)return{outerHeightStyle:0,overflowing:!1};let r=j.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");let o=n.boxSizing,s=f(n.paddingBottom)+f(n.paddingTop),i=f(n.borderBottomWidth)+f(n.borderTopWidth),u=r.scrollHeight;r.value="x";let l=r.scrollHeight,c=u;return h&&(c=Math.max(Number(h)*l,c)),p&&(c=Math.min(Number(p)*l,c)),{outerHeightStyle:(c=Math.max(c,l))+("border-box"===o?s+i:0),overflowing:1>=Math.abs(c-u)}},[p,h,e.placeholder]),C=s.useCallback(()=>{let e=Z();if(null==e||0===Object.keys(e).length||0===e.outerHeightStyle&&!e.overflowing)return;let t=b.current;t.style.height="".concat(e.outerHeightStyle,"px"),t.style.overflow=e.overflowing?"hidden":""},[Z]);return(0,u.Z)(()=>{let e,t;let n=()=>{C()},r=(0,l.Z)(n),o=b.current,s=(0,a.Z)(o);return s.addEventListener("resize",r),"undefined"!=typeof ResizeObserver&&(t=new ResizeObserver(n)).observe(o),()=>{r.clear(),cancelAnimationFrame(e),s.removeEventListener("resize",r),t&&t.disconnect()}},[Z,C]),(0,u.Z)(()=>{C()}),(0,c.jsxs)(s.Fragment,{children:[(0,c.jsx)("textarea",(0,r.Z)({value:y,onChange:e=>{w||C(),n&&n(e)},ref:x,rows:h,style:g},v)),(0,c.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:j,tabIndex:-1,style:(0,r.Z)({},m,g,{paddingTop:0,paddingBottom:0})})]})})},1227:function(e,t,n){"use strict";function r(e,t=166){let n;function r(...o){clearTimeout(n),n=setTimeout(()=>{e.apply(this,o)},t)}return r.clear=()=>{clearTimeout(n)},r}n.d(t,{Z:function(){return r}})},5694:function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{Z:function(){return r}})},3076:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(5694);function o(e){return(0,r.Z)(e).defaultView||window}},9969:function(e,t,n){"use strict";function r(e,t){"function"==typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},8017:function(e,t,n){"use strict";var r=n(2265);let o="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;t.Z=o},2367:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(2265),o=n(9969);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo(()=>t.every(e=>null==e)?null:e=>{t.forEach(t=>{(0,o.Z)(t,e)})},t)}},6463:function(e,t,n){"use strict";var r=n(1169);n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useServerInsertedHTML")&&n.d(t,{useServerInsertedHTML:function(){return r.useServerInsertedHTML}})},481:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(7437);n(2265);var o=n(729),s=n(1996),i=n(1444),a=n(6463);function u(){let e=(0,a.useRouter)(),t=(0,i.I0)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("form",{onSubmit:function(n){var r,o;n.preventDefault();let i=new FormData,a=null===(r=n.target)||void 0===r?void 0:r.body.value,u=null===(o=n.target)||void 0===o?void 0:o.image.files[0];i.append("body",a),i.append("image",u),t((0,s.q2)(i)),e.push("/"),e.refresh},style:{width:"80%",margin:"10px auto"},children:[(0,r.jsx)(o.u,{maxRows:6,minRows:10,className:"form-control",name:"body"}),(0,r.jsx)("input",{type:"file",className:"btn",name:"image"}),(0,r.jsx)("button",{type:"submit",className:"btn",style:{cursor:"pointer"},children:"Add post"})]})})}},1996:function(e,t,n){"use strict";n.d(t,{$D:function(){return m},$u:function(){return f},Bd:function(){return i},Ir:function(){return c},aP:function(){return d},bs:function(){return u},q2:function(){return a},ww:function(){return l}});var r=n(9753);let o={token:localStorage.getItem("userToken"),"Content-Type":"application/json"},s={token:localStorage.getItem("userToken"),"Content-Type":"application/json"},i=(0,r.hg)("posts/getAllPosts",async()=>{let e=await fetch("https://linked-posts.routemisr.com/posts?limit=50",{method:"GET",headers:o}),t=await e.json();return console.log(t),t}),a=(0,r.hg)("posts/addPost",async e=>{let t=await fetch("https://linked-posts.routemisr.com/posts",{body:e,method:"POST",headers:o});return await t.json()}),u=(0,r.hg)("posts/removepost",async e=>{let t=await fetch("https://linked-posts.routemisr.com/posts/".concat(e),{method:"DELETE",headers:s});return await t.json()}),l=(0,r.hg)("posts/getUserPosts",async e=>{let t=await fetch("https://linked-posts.routemisr.com/users/".concat(e,"/posts?limit=4"),{headers:o});return await t.json()}),c=(0,r.hg)("posts/addComment",async e=>{let t=await fetch("https://linked-posts.routemisr.com/comments",{body:JSON.stringify(e),method:"POST",headers:s});return await t.json()}),d=(0,r.hg)("posts/getUserComments",async e=>{let t=await fetch("https://linked-posts.routemisr.com/posts/".concat(e,"/comments"),{headers:o});return await t.json()}),f=(0,r.hg)("posts/removecomment",async e=>{let t=await fetch("https://linked-posts.routemisr.com/comments/".concat(e),{method:"DELETE",headers:s});return await t.json()}),m=(0,r.oM)({name:"posts",initialState:{allPosts:[],userPosts:[],isLoading:!0,isError:null,comments:[]},extraReducers:e=>{e.addCase(i.fulfilled,(e,t)=>{e.isLoading=!1,e.allPosts=t.payload.posts}),e.addCase(i.pending,(e,t)=>{e.isLoading=!0}),e.addCase(a.fulfilled,(e,t)=>{console.log("added"),e.isLoading=!1,e.allPosts.push(t.payload)}),e.addCase(u.fulfilled,(e,t)=>{console.log("removed"),e.userPosts=e.userPosts.filter(e=>e._id!==t.payload.id)}),e.addCase(d.fulfilled,(e,t)=>{e.comments=t.payload.comments}),e.addCase(l.fulfilled,(e,t)=>{e.isLoading=!1,e.userPosts=t.payload.posts}),e.addCase(c.fulfilled,(e,t)=>{e.isLoading=!1}),e.addCase(f.fulfilled,(e,t)=>{console.log(t.payload),e.comments=e.comments.filter(e=>e._id!==t.payload.id)})},reducers:{}}).reducer},2988:function(e,t,n){"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}n.d(t,{Z:function(){return r}})},3950:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}n.d(t,{Z:function(){return r}})}},function(e){e.O(0,[444,753,971,23,744],function(){return e(e.s=5964)}),_N_E=e.O()}]);