(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{6465:function(e,t,s){Promise.resolve().then(s.bind(s,6370))},2986:function(e,t,s){"use strict";var o=s(3963);t.Z=void 0;var n=o(s(9118)),a=s(7437);t.Z=(0,n.default)((0,a.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92"}),"Share")},3844:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var o=s(7437),n=s(2265),a=s(6548),r=s(8655),i=s(5870),l=s(8467),d=s(1444),c=s(1996);function u(e){let{postdetails:t}=e,{allPosts:s,isLoading:u,isError:m,userPosts:p}=(0,d.v9)(e=>e.posts),[h,g]=n.useState(null),f=(0,d.I0)(),[x,j]=n.useState(null),y=!!x,Z=()=>{j(null)};return(0,o.jsxs)("div",{children:[(0,o.jsx)(a.Z,{id:"demo-positioned-button","aria-controls":y?"demo-positioned-menu":void 0,"aria-haspopup":"true","aria-expanded":y?"true":void 0,onClick:e=>{j(e.currentTarget)},className:"hover",children:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(l.Z,{})})}),(0,o.jsxs)(r.Z,{className:"hover",id:"demo-positioned-menu","aria-labelledby":"demo-positioned-button",anchorEl:x,open:y,onClose:Z,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[(0,o.jsx)(i.Z,{onClick:()=>{Z(),f((0,c.bs)(t._id))},children:"Delete"}),(0,o.jsx)(i.Z,{onClick:Z,children:"Edit"})]})]})}},6370:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return E}});var o=s(7437),n=s(6101),a=s(1326),r=s(8433),i=s(2265),l=s(1444),d=s(1996),c=s(8024),u=s(270),m=s(7573),p=s(4037),h=s(4696),g=s(2879),f=s(9216),x=s(5349),j=s(335),y=s(511),Z=s(8713),k=s(9678),v=s(2986),w=s(8125),C=s(3844),b=s(7883);let S=(0,c.ZP)(e=>{let{expand:t,...s}=e;return(0,o.jsx)(j.Z,{...s})})(e=>{let{theme:t,expand:s}=e;return{transform:s?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})}});function P(e){let{postdetails:t}=e,s=(0,l.I0)(),[r,c]=i.useState(!1),P=()=>{s((0,d.$u)(t.comments._id))};return i.useEffect(()=>{localStorage.getItem("userToken")&&s((0,n.OA)())},[s]),(0,o.jsxs)(u.Z,{sx:{maxWidth:800},children:[(0,o.jsx)(m.Z,{avatar:(0,o.jsx)(x.Z,{src:null==t?void 0:t.user.photo,sx:{bgcolor:Z.Z[500]},"aria-label":""}),action:(0,o.jsx)(j.Z,{"aria-label":"settings",children:(0,o.jsx)(C.Z,{postdetails:t})}),title:null==t?void 0:t.user.name,subheader:"September 14, 2016"}),(0,o.jsx)(p.Z,{component:"img",height:"194",image:t.image,alt:"Paella dish"}),(0,o.jsx)(h.Z,{children:(0,o.jsx)(y.Z,{variant:"body2",color:"text.secondary",children:t.body})}),(0,o.jsxs)(g.Z,{disableSpacing:!0,children:[(0,o.jsx)(j.Z,{"aria-label":"add to favorites",children:(0,o.jsx)(k.Z,{})}),(0,o.jsx)(j.Z,{"aria-label":"share",children:(0,o.jsx)(v.Z,{})}),(0,o.jsx)(S,{expand:r,onClick:()=>{c(!r)},"aria-expanded":r,"aria-label":"show more",children:(0,o.jsx)(w.Z,{})})]}),(0,o.jsx)(f.Z,{in:r,timeout:"auto",unmountOnExit:!0,children:(0,o.jsx)(h.Z,{children:null==t?void 0:t.comments.map(e=>(0,o.jsxs)(a.Z,{className:"comment",children:[(0,o.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,o.jsx)(x.Z,{src:e.commentCreator.photo,sx:{bgcolor:Z.Z[500],width:"30px",height:"30px"},"aria-label":"recipe"}),(0,o.jsx)("h5",{style:{marginLeft:"2px"},children:e.commentCreator.name})]}),(0,o.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)(y.Z,{paragraph:!0,sx:{margin:"5px"},children:e.content}),(0,o.jsx)(b.Z,{onClick:P,sx:{cursor:"pointer"}})]})]},e._id))})})]})}var T=s(6648);function E(){let e=(0,l.I0)(),{userData:t}=(0,l.v9)(e=>e.users),{allPosts:s,isLoading:c,isError:u,userPosts:m}=(0,l.v9)(e=>e.posts);return i.useEffect(()=>{localStorage.getItem("userToken")&&e((0,n.OA)())},[e]),i.useEffect(()=>{(null==t?void 0:t._id)&&e((0,d.ww)(t._id))},[e,t]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"profile-pho",children:(0,o.jsx)(T.default,{src:null==t?void 0:t.photo,style:{width:"100%",height:"100%"},alt:"profile"})}),(0,o.jsx)(a.Z,{children:(0,o.jsx)(r.ZP,{container:!0,rowSpacing:2,columnSpacing:{xs:1,sm:2,md:0},justifyContent:"center",alignItems:"center",className:"grid",children:null==m?void 0:m.map(e=>(0,o.jsx)(r.ZP,{sx:{width:"100%"},item:!0,xs:8,children:(0,o.jsx)(P,{postdetails:e,userDetalis:t})},e._id))})})]})}},1996:function(e,t,s){"use strict";s.d(t,{$D:function(){return p},$u:function(){return m},Bd:function(){return r},Ir:function(){return c},aP:function(){return u},bs:function(){return l},q2:function(){return i},ww:function(){return d}});var o=s(9753);let n={token:localStorage.getItem("userToken"),"Content-Type":"application/json"},a={token:localStorage.getItem("userToken"),"Content-Type":"application/json"},r=(0,o.hg)("posts/getAllPosts",async()=>{let e=await fetch("https://linked-posts.routemisr.com/posts?limit=50",{method:"GET",headers:n}),t=await e.json();return console.log(t),t}),i=(0,o.hg)("posts/addPost",async e=>{let t=await fetch("https://linked-posts.routemisr.com/posts",{body:e,method:"POST",headers:n});return await t.json()}),l=(0,o.hg)("posts/removepost",async e=>{let t=await fetch("https://linked-posts.routemisr.com/posts/".concat(e),{method:"DELETE",headers:a});return await t.json()}),d=(0,o.hg)("posts/getUserPosts",async e=>{let t=await fetch("https://linked-posts.routemisr.com/users/".concat(e,"/posts?limit=4"),{headers:n});return await t.json()}),c=(0,o.hg)("posts/addComment",async e=>{let t=await fetch("https://linked-posts.routemisr.com/comments",{body:JSON.stringify(e),method:"POST",headers:a});return await t.json()}),u=(0,o.hg)("posts/getUserComments",async e=>{let t=await fetch("https://linked-posts.routemisr.com/posts/".concat(e,"/comments"),{headers:n});return await t.json()}),m=(0,o.hg)("posts/removecomment",async e=>{let t=await fetch("https://linked-posts.routemisr.com/comments/".concat(e),{method:"DELETE",headers:a});return await t.json()}),p=(0,o.oM)({name:"posts",initialState:{allPosts:[],userPosts:[],isLoading:!0,isError:null,comments:[]},extraReducers:e=>{e.addCase(r.fulfilled,(e,t)=>{e.isLoading=!1,e.allPosts=t.payload.posts}),e.addCase(r.pending,(e,t)=>{e.isLoading=!0}),e.addCase(i.fulfilled,(e,t)=>{console.log("added"),e.isLoading=!1,e.allPosts.push(t.payload)}),e.addCase(l.fulfilled,(e,t)=>{console.log("removed"),e.userPosts=e.userPosts.filter(e=>e._id!==t.payload.id)}),e.addCase(u.fulfilled,(e,t)=>{e.comments=t.payload.comments}),e.addCase(d.fulfilled,(e,t)=>{e.isLoading=!1,e.userPosts=t.payload.posts}),e.addCase(c.fulfilled,(e,t)=>{e.isLoading=!1}),e.addCase(m.fulfilled,(e,t)=>{console.log(t.payload),e.comments=e.comments.filter(e=>e._id!==t.payload.id)})},reducers:{}}).reducer},6101:function(e,t,s){"use strict";s.d(t,{M_:function(){return a},OA:function(){return l},cA:function(){return d},n$:function(){return r},zv:function(){return i}});var o=s(9753);let n={token:localStorage.getItem("userToken")},a=(0,o.hg)("users/getUserDetails",async e=>{let t=await fetch("https://linked-posts.routemisr.com/users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await t.json()}),r=(0,o.hg)("users/userLogin",async e=>{let t=await fetch("https://linked-posts.routemisr.com/users/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();return console.log(s),s}),i=(0,o.hg)("users/UploadImage",async e=>{let t=await fetch("https://linked-posts.routemisr.com/users/upload-photo",{method:"PATCH",headers:n,body:e}),s=await t.json();return console.log(s),s}),l=(0,o.hg)("users/getLoggedUserData",async()=>{let e=await fetch("https://linked-posts.routemisr.com/users/profile-data",{headers:n});return await e.json()}),d=(0,o.oM)({name:"users",initialState:{loggedin:!0,message:"",userData:[],loggedmessage:"",registermessok:"",registermessnot:"",loginmessok:"",loginmessnot:""},extraReducers:e=>{e.addCase(a.fulfilled,(e,t)=>{e.registermessok=t.payload.message,e.registermessnot=t.payload.error}),e.addCase(r.fulfilled,(e,t)=>{console.log("Logged"),e.loginmessok=t.payload.message,e.loginmessnot=t.payload.error,t.payload&&t.payload&&t.payload.token&&localStorage.setItem("userToken",t.payload.token)}),e.addCase(r.rejected,(e,t)=>{console.log("Not Logged"),e.loggedmessage=null==t?void 0:t.payload.error}),e.addCase(l.fulfilled,(e,t)=>{e.userData=t.payload.user})},reducers:{}}).reducer}},function(e){e.O(0,[444,753,355,91,645,382,648,971,23,744],function(){return e(e.s=6465)}),_N_E=e.O()}]);