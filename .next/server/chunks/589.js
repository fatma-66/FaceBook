exports.id=589,exports.ids=[589],exports.modules={7699:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},1111:(e,t,s)=>{Promise.resolve().then(s.bind(s,5560))},5560:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>U});var o=s(326),a=s(6465),r=s.n(a);s(3824);var n=s(5842),l=s(3146);let i=(0,l.oM)({name:"counter",initialState:{count:0},reducers:{increase:(e,t)=>{e.count+=t.payload},decrease:()=>{console.log("increase")}}}),d=i.reducer,{increase:c,decrease:p}=i.actions;var m=s(712),u=s(6324);let h=(0,l.oM)({name:"userdata",initialState:{user:{id:"",name:"",photo:""},isLoading:!1,isError:null},reducers:{updateUserProfileImage:(e,t)=>{let{userId:s,photo:o}=t.payload;e.user.id===s&&(e.user.photo=o)}}}),{updateUserProfileImage:g}=h.actions,f=h.reducer,x=(0,l.xC)({reducer:{counter:d,posts:m.$D,users:u.cA,userdata:f}});var y=s(7577),j=s(9426),k=s(1728),w=s(7841),v=s(8260),S=s(274),C=s(7486),P=s(9291),b=s(5616),T=s(3198),Z=s(2265),O=s(7820),E=s(4044),I=s(5047);function L(){let{userData:e}=(0,n.v9)(e=>e.users),t=[{name:"Home",path:"/"},{name:"Profile",path:"/profile"}],s=(0,I.useRouter)(),a=(0,n.I0)(),[r,l]=y.useState(!!localStorage.getItem("userToken")),[i,d]=y.useState(null),[c,p]=y.useState(null),m=()=>{d(null)},h=()=>{p(null)},g=e=>{"/login"===e?(localStorage.removeItem("userToken"),l(!1),s.push("/login"),s.prefetch):s.push(e),h()};y.useEffect(()=>{localStorage.getItem("userToken")&&a((0,u.OA)())},[a]);let f=e=>{"/login"===e?(localStorage.removeItem("userToken"),l(!1),s.push("/")):s.push(e),m()};return o.jsx(j.Z,{sx:{boxShadow:"none"},position:"static",children:o.jsx(b.Z,{maxWidth:"xl",children:(0,o.jsxs)(w.Z,{disableGutters:!0,children:[o.jsx(S.Z,{variant:"h6",noWrap:!0,component:"a",href:"#app-bar-with-responsive-menu",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:"FACEBOOK"}),(0,o.jsxs)(k.Z,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[o.jsx(v.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e=>{d(e.currentTarget)},color:"inherit",children:o.jsx(P.Z,{})}),o.jsx(C.Z,{id:"menu-appbar",anchorEl:i,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!i,onClose:m,sx:{display:{xs:"block",md:"none"}},children:t.map(e=>o.jsx(E.Z,{onClick:()=>f(e.path),children:o.jsx(S.Z,{textAlign:"center",children:e.name})},e.name))})]}),o.jsx(S.Z,{variant:"h5",noWrap:!0,component:"a",href:"#app-bar-with-responsive-menu",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:"FACEBOOk"}),localStorage.getItem("userToken")?o.jsx(k.Z,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:t.map(e=>o.jsx(Z.Z,{onClick:()=>f(e.path),sx:{my:2,color:"white",display:"block"},children:e.name},e.name))}):null,localStorage.getItem("userToken")?(0,o.jsxs)(k.Z,{sx:{flexGrow:0},children:[o.jsx(O.Z,{title:"Open settings",children:o.jsx(v.Z,{onClick:e=>{p(e.currentTarget)},sx:{p:0},children:o.jsx(T.Z,{alt:"Remy Sharp",src:e?.photo})})}),o.jsx(C.Z,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!c,onClose:h,children:[{name:"Profile",path:"/profile"},{name:"Add post",path:"/addpost"},{name:"Upload photo",path:"/uploadphoto"},{name:"logout",path:"/login"}].map(e=>o.jsx(E.Z,{onClick:()=>g(e.path),children:o.jsx(S.Z,{textAlign:"center",children:e.name})},e.name))})]}):null]})})})}var A=s(4654),D=s(7654),$=s(324),M=s.n($);let z=(0,s(5179).Z)({typography:{fontFamily:M().style.fontFamily},palette:{primary:{main:"#000"}}});function U({children:e}){return o.jsx("html",{lang:"en",children:o.jsx(A.Z,{children:o.jsx(D.Z,{theme:z,children:o.jsx(n.zt,{store:x,children:(0,o.jsxs)("body",{className:r().className,children:[o.jsx(L,{}),e]})})})})})}},712:(e,t,s)=>{"use strict";s.d(t,{$D:()=>u,$u:()=>m,Ir:()=>c,aP:()=>p,bs:()=>i,q2:()=>l});var o=s(3146);let a={token:window.localStorage.getItem("userToken"),"Content-Type":"application/json"},r={token:localStorage.getItem("userToken"),"Content-Type":"application/json",Accept:"application/json"},n=(0,o.hg)("posts/getAllPosts",async()=>{let e=await fetch("https://linked-posts.routemisr.com/posts?limit=50",{method:"GET",headers:a}),t=await e.json();return console.log(t),t}),l=(0,o.hg)("posts/addPost",async e=>{let t=await fetch("https://linked-posts.routemisr.com/posts",{body:e,method:"POST",headers:a});return await t.json()}),i=(0,o.hg)("posts/removepost",async e=>{let t=await fetch(`https://linked-posts.routemisr.com/posts/${e}`,{method:"DELETE",headers:r});return await t.json()}),d=(0,o.hg)("posts/getUserPosts",async e=>{let t=await fetch(`https://linked-posts.routemisr.com/users/${e}/posts?limit=4`,{headers:a});return await t.json()}),c=(0,o.hg)("posts/addComment",async e=>{let t=await fetch("https://linked-posts.routemisr.com/comments",{body:JSON.stringify(e),method:"POST",headers:r});return await t.json()}),p=(0,o.hg)("posts/getUserComments",async e=>{let t=await fetch(`https://linked-posts.routemisr.com/posts/${e}/comments`,{headers:a});return await t.json()}),m=(0,o.hg)("posts/removecomment",async e=>{let t=await fetch(`https://linked-posts.routemisr.com/comments/${e}`,{method:"DELETE",headers:r});return await t.json()}),u=(0,o.oM)({name:"posts",initialState:{allPosts:[],userPosts:[],isLoading:!0,isError:null,comments:[]},extraReducers:e=>{e.addCase(n.fulfilled,(e,t)=>{e.isLoading=!1,e.allPosts=t.payload.posts}),e.addCase(n.pending,(e,t)=>{e.isLoading=!0}),e.addCase(l.fulfilled,(e,t)=>{console.log("added"),e.isLoading=!1,e.allPosts.push(t.payload)}),e.addCase(i.fulfilled,(e,t)=>{console.log("removed"),e.userPosts=e.userPosts.filter(e=>e._id!==t.payload.id)}),e.addCase(p.fulfilled,(e,t)=>{e.comments=t.payload.comments}),e.addCase(d.fulfilled,(e,t)=>{e.isLoading=!1,e.userPosts=t.payload.posts}),e.addCase(c.fulfilled,(e,t)=>{e.isLoading=!1}),e.addCase(m.fulfilled,(e,t)=>{console.log(t.payload),e.comments=e.comments.filter(e=>e._id!==t.payload.id)})},reducers:{}}).reducer},6324:(e,t,s)=>{"use strict";s.d(t,{M_:()=>r,OA:()=>i,cA:()=>d,n$:()=>n,zv:()=>l});var o=s(3146);let a={token:localStorage.getItem("userToken")},r=(0,o.hg)("users/getUserDetails",async e=>{let t=await fetch("https://linked-posts.routemisr.com/users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await t.json()}),n=(0,o.hg)("users/userLogin",async e=>{let t=await fetch("https://linked-posts.routemisr.com/users/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();return console.log(s),s}),l=(0,o.hg)("users/UploadImage",async e=>{let t=await fetch("https://linked-posts.routemisr.com/users/upload-photo",{method:"PATCH",headers:a,body:e}),s=await t.json();return console.log(s),s}),i=(0,o.hg)("users/getLoggedUserData",async()=>{let e=await fetch("https://linked-posts.routemisr.com/users/profile-data",{headers:a});return await e.json()}),d=(0,o.oM)({name:"users",initialState:{loggedin:!0,message:"",userData:[],loggedmessage:"",registermessok:"",registermessnot:"",loginmessok:"",loginmessnot:""},extraReducers:e=>{e.addCase(r.fulfilled,(e,t)=>{e.registermessok=t.payload.message,e.registermessnot=t.payload.error}),e.addCase(n.fulfilled,(e,t)=>{console.log("Logged"),e.loginmessok=t.payload.message,e.loginmessnot=t.payload.error,t.payload&&t.payload&&t.payload.token&&localStorage.setItem("userToken",t.payload.token)}),e.addCase(n.rejected,(e,t)=>{console.log("Not Logged"),e.loggedmessage=t?.payload.error}),e.addCase(i.fulfilled,(e,t)=>{e.userData=t.payload.user})},reducers:{}}).reducer},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>l});var o=s(8570);let a=(0,o.createProxy)(String.raw`D:\redux project\final\src\app\layout.tsx`),{__esModule:r,$$typeof:n}=a;a.default;let l=(0,o.createProxy)(String.raw`D:\redux project\final\src\app\layout.tsx#default`)},3824:()=>{}};